# KantanPro (KTPWP)

WordPressで動作する業務管理プラグイン。受注進捗・伝票・顧客・サービス・仕入先・レポート・スタッフチャットまで一元管理。

---

## 説明
KantanPro (KTPWP) は、WordPressで動作する総合ビジネス管理プラグインです。受注進捗・伝票・顧客・サービス・仕入先・レポート・設定の7タブで、ビジネスワークフローを一元管理。スタッフ間チャットや自動スクロール、関連データの自動削除など、現場の声を反映した機能を搭載しています。

---

## 主な機能
- 6つの管理タブ（仕事リスト・伝票処理・得意先・サービス・協力会社・レポート）
- 受注案件の進捗管理（7段階）
- 受注書の作成・編集・印刷・プレビュー
- 顧客・サービス・仕入先のマスター管理
- 協力会社商品管理（商品名・単価・数量・単位の詳細管理）
- スタッフ間チャット（自動スクロール・削除連動）
- 売上・進捗・顧客別レポート
- 直感的なタブUI・ページネーション・ソート・検索
- 案件名インライン編集（リアルタイム更新）
- レスポンシブデザイン
- 納期管理機能

---

## セキュリティ対策
- SQLインジェクション防止
- XSS・CSRF対策
- ファイルアップロード検証
- 権限管理・安全なDBアクセス

---

## インストール
1. プラグインを `/wp-content/plugins/` にアップロード、または管理画面からインストール
2. プラグインを有効化
3. 固定ページに `[ktpwp_all_tab]` を挿入
4. **管理画面のメニュー**
   - 「KantanPro」から基本設定を行ってください。
   - 「一般設定」: プラグインの基本設定
   - 「メール・SMTP設定」: メール送信に関する基本設定
   - 「デザイン」: プラグインの外観とデザイン設定
   - 「ライセンス設定」: アクティベーションキー登録
   - 「スタッフ管理」: スタッフの追加・削除

---

## システム要件
- WordPress 5.0 以上
- PHP 7.4 以上
- MySQL 5.6 以上 または MariaDB 10.0 以上
- 推奨メモリ: 256MB 以上

---

## 基本的な使い方
固定ページに `[ktpwp_all_tab]` を挿入すると、6つのタブが表示されます。

---

## 進捗ステータス
1. **受付中** - 新規受注、内容確認中
2. **見積中** - 見積作成・提案中
3. **受注** - 作業実行中
4. **完了** - 作業完了、請求書未発行
5. **請求済** - 請求書発行済み
6. **入金済** - 支払い完了
7. **ボツ** - 復活可能なボツ案件

---

## データ管理機能
- **ソート機能**: 各リストはID、名前、日付、カテゴリー等でソート可能
- **検索機能**: 各タブで条件検索が可能
- **ページネーション**: 大量データも快適に閲覧
- **削除管理**: 対象外設定で論理削除による安全な管理

---

## 変更履歴

### 1.2.1(beta)
- モバイル表示の改善
- 進捗状況にボツ追加
- 納期管理機能を実装
- 得意先タブの構造変更

### 1.2.0(beta)
- 設定タブの廃止
- 伝票処理タブの最終的実装
- サービス選択ポップアップで自社商品の入力（追加・更新）
- 協力会社選択ポップアップで協力会社職能を入力（追加・更新）
- 行要素数値の最適化

### 1.1.1 (beta)
- 協力会社機能の大幅拡張により、協力会社ごとの商品・サービス管理が詳細に行えるようになりました
- ページネーション機能で大量データの効率的な閲覧が可能になりました

### 1.1.0 (beta)
- 職能管理機能を商品管理機能に拡張（商品名・単価・数量・単位の詳細管理）
- サービス選択ポップアップにページネーション機能を実装
- カード型リストビューでUI統一とレスポンシブデザイン強化
- 案件名インライン編集機能（Ajax対応、リアルタイム更新）
- データマイグレーション機能付きで既存データの安全な移行
- 一般設定との連携強化（表示件数の動的適用）
- デバッグログ機能とエラーハンドリングの改善

### 1.0.9 (beta)
- 未ログインユーザー向け表示の改善
- プラグイン名表記をKTPWPからKantanProに統一
- ユーザー登録リンクの追加（動的URL生成対応）
- ホームページリンクをルートディレクトリに修正
- UI/UX向上とユーザビリティ改善
- プラグインの更新通知・自動更新オプションを追加

### 1.0.8 (beta)
- スタッフチャット自動スクロール・削除連動
- オーダー削除後の自動作成防止
- セキュリティ強化
- プラグイン情報の表示などを修正
- 受注書タブでの請求項目とコスト項目の問題を修正
- スタッフ管理画面を追加
- ログイン中のスタッフアバターの表示するように機能追加

### 1.0.7 (beta)
- UI/UX改善
- ベータ版リリース

### 1.0.0 (beta)
- ベータ版リリース
- プラグインリファレンス機能の実装
- リファレンスモーダルとAJAXコンテンツ読み込み機能
- 包括的なセキュリティ対策の実装
- 7つの主要機能タブの完全実装
- 受注管理、顧客管理、サービス管理、仕入先管理機能
- 印刷・プレビュー機能の最適化
- レポート・分析機能の強化
- レスポンシブデザイン対応の完成

---

## ライセンス
GPL v2 or later  
License URI: https://www.gnu.org/licenses/gpl-2.0.html

---

## サポート

プラグインに関するお問い合わせやサポートは、以下までご連絡ください：

**公式サイト**: https://www.kantanpro.com/